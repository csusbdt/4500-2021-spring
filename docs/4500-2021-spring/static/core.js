export const d_w=1920;export const d_h=1080;export const v_w=1920;export const v_h=1080;export function set_renderer(e){f_render=e}export function set_event_handler(e){f_handle_event=e}let f_render=null,f_handle_event=null,scale=1,offset_x=0,offset_y=0,margin_left=0,margin_top=0;function adjust_canvas(){const e=window.innerWidth,t=window.innerHeight;scale=Math.min(1,e/v_w,t/v_h),g_canvas.width=Math.min(e,d_w*scale),g_canvas.height=Math.min(t,d_h*scale),offset_x=(g_canvas.width-d_w*scale)/2,offset_y=(g_canvas.height-d_h*scale)/2,margin_left=(e-g_canvas.width)/2,margin_top=(t-g_canvas.height)/2,g_canvas.style["margin-left"]=margin_left,g_canvas.style["margin-top"]=margin_top}window.addEventListener("resize",adjust_canvas,!0),adjust_canvas();const spf=1/8,ctx=g_canvas.getContext("2d");let previous_time=(new Date).getTime()/1e3;function animation_loop(){const e=(new Date).getTime()/1e3;let t=e-previous_time;previous_time=e,ctx.setTransform(scale,0,0,scale,offset_x,offset_y),t>spf&&(t=spf),null!==f_render&&f_render(ctx,t,e),ctx.setTransform(1,0,0,1,0,0),requestAnimationFrame(animation_loop)}requestAnimationFrame(animation_loop);const room_coords=e=>[(e.pageX-margin_left-offset_x)/scale,(e.pageY-margin_top-offset_y)/scale],mousedown=e=>{null!==f_handle_event&&(e.preventDefault(),f_handle_event(room_coords(e)))},touchstart=e=>{null!==f_handle_event&&(e.preventDefault(),f_handle_event(room_coords(e.changedTouches[0])))};g_ui_div.addEventListener("mousedown",mousedown,{capture:!0,once:!1}),g_ui_div.addEventListener("touchstart",touchstart,{capture:!0,once:!1});