import{starts,stops,run_stop_set,run_start_set}from"/4500-2021-spring/static/mixins.js";export function c_once(t){this.room=t,this.starts=starts,this.stops=stops,this.run_stop_set=run_stop_set,this.run_start_set=run_start_set,this.block_goto=!0,this.order=10,this.frame_duration=.1,this.frames=[],this.frame_index=-1,this.t=0}c_once.prototype.noblock=function(){return this.block_goto=!1,this},c_once.prototype.ord=function(t){return this.order=t,this},c_once.prototype.dur=function(t){return this.frame_duration=t,this},c_once.prototype.add=function(t){return this.frames.push(t),this},c_once.prototype.start=function(){if(0===this.frames.length)throw new Error("no frames");this.frame_index=0,this.t=0,this.room.insert_updatable(this),this.room.insert_drawable(this)},c_once.prototype.update=function(t){this.t+=t,this.t<this.frame_duration||(this.t=0,++this.frame_index,this.frame_index===this.frames.length&&(this.room.remove_updatable(this),this.room.remove_drawable(this),this.run_stop_set(),this.run_start_set()))},c_once.prototype.draw=function(t){this.frames[this.frame_index].draw(t)};