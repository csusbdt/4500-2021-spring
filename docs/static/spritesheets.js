import{load_image,load_json}from"/4500-2021-spring/static/utils.js";function c_frame(e,s){this.i=e.image,this.f=e.frames[s]}function c_spritesheet(e){this.name=e,this.image=null,this.frames=null,this.loaded=!1}c_frame.prototype.draw=function(e){e.drawImage(this.i,this.f.sx,this.f.sy,this.f.w,this.f.h,this.f.dx,this.f.dy,this.f.w,this.f.h)};const spritesheets=new Map;export const get_spritesheet=e=>{let s=spritesheets.get(e);return void 0===s?(s=new c_spritesheet(e),spritesheets.set(e,s),s.load(),s):null===s.image||null===s.frames?Promise.reject("spritesheet loading not finished"):Promise.resolve(s)};c_spritesheet.prototype.load=function(){return Promise.all([load_image(`/4500-2021-spring/sprites/${this.name}.png`),load_json(`/4500-2021-spring/sprites/${this.name}.json`)]).then((([e,s])=>(this.image=e,this.frames=s,this.loaded=!0,this)))},c_spritesheet.prototype.frame=function(e){return new c_frame(this,e)};